---
import SectionTitle from './SectionTitle.astro'
---

<section id='contact'>
	<SectionTitle title='Contacto' />

	<!-- Formulario de contacto -->
	<form id='contact-form'>
		<input type='text' name='user_name' placeholder='Nombre' required />
		<input type='email' name='user_email' placeholder='Email' required />
		<textarea name='message' placeholder='Tu mensaje' rows='5' required></textarea>
		<button type='submit'>Enviar</button>
	</form>
</section>

<style>
	section {
		margin: 50px 10%;
	}

	form {
		display: flex;
		flex-direction: column;
		gap: 1rem;
		max-width: 500px;
		margin: auto;
	}

	input,
	textarea {
		padding: 0.5rem;
		font-size: 1rem;
		border: none;
	}

	button {
		padding: 0.7rem;
		font-size: 1rem;
		cursor: pointer;
		border: none;
		background-color: #b1dedb;
	}
</style>

<script>
	import emailjs from 'emailjs-com'

	const form = document.getElementById('contact-form') as HTMLFormElement

	form?.addEventListener('submit', function (e) {
		e.preventDefault()

		const serviceID = 'service_g5v1uj4'
		const templateID = 'template_3xmufai'
		const userID = '5oguhkuB2Q-TsHoRK'

		emailjs.sendForm(serviceID, templateID, e.target as HTMLFormElement, userID).then(
			() => {
				alert('¡Mensaje enviado!')
				form.reset()
			},
			(error) => {
				console.error('Error al enviar el mensaje:', error)
				alert('Hubo un error al enviar el mensaje. Inténtalo de nuevo.')
			}
		)
	})
</script>
